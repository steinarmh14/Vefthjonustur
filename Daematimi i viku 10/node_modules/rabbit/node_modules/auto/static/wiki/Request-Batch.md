Request queues are used for creating [request](https://github.com/mikeal/request) cargos [async.cargo](https://github.com/caolan/async#cargo) with timeout periods. This is intended for batching requests.

```js
// Create Request Queue
var request = require( 'request' );
var auto = require( 'auto' );

// Create Request Queue
var batch = auto.batch({
 payload: 10,
 concurrency: 1,
 timeout: 'nextTick',
 saturated: function saturated() { console.log( 'saturated' ); },
 empty: function saturated() { console.log( 'empty' ); },
 process: function process( cars, callback ) {
   var body = [];

   // Build the crazy format ElasticSearch wants
   for( var i in cars ) {
     body.push( { "index" : { "_type" : cars[i].type, "_id" : cars[i].id } ] );

     for( var key in cars[i] ) {    
       body.push( '{ "' + key + '": "' + cars[i][key] + '" }' );
     }

   }

   request({
     url: 'http://localhost:9200/sample/cars/_bulk',
     method: 'post',
     body: body.join( "\n" )
   }, function done( error, response, body ) {
    console.log( 'Done with all requests.' );
   });

 }
});

// Add Chevy
batch.push({ type: 'chevy', id: 'tahoe', color: 'black', year: 2010 }, function done( error, response, body ) {  
  console.log( 'Added chevy [%s].', body._id ); 
});

// Add BMW before Chevy
batch. unshift({ type: 'bmw', id: '323i', color: 'black', year: 2000 }, function done( error, response, body ) { 
  console.log( 'Added BMW [%s].', body._id ); 
});


```

* [ElasticSearch Bulk API Docs](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/docs-bulk.html)
* [Request Module](https://github.com/mikeal/request)
* [Async Module](https://github.com/caolan/async#cargo)